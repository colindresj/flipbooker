/*! Flipbooker - v0.2.0 - 2014-02-10
* https://github.com/colindresj/flipbooker
* Copyright (c) 2014 JC; Licensed MIT */

!function(a){a.flipbooker=function(b,c){function d(){function c(a){var b={"Top Left":function(a){a.removeClass("cap-bottom cap-right"),a.addClass("cap-top cap-left")},"Top Right":function(a){a.removeClass("cap-bottom cap-left"),a.addClass("cap-top cap-right")},"Bottom Left":function(a){a.removeClass("cap-top cap-right"),a.addClass("cap-bottom cap-left")},"Bottom Right":function(a){a.removeClass("cap-top cap-left"),a.addClass("cap-bottom cap-right")},_default:function(a){a.removeClass("cap-bottom cap-right"),a.addClass("cap-top cap-left")}};a?b[a].call(b,g):b._default(g)}h=b[j],h.source?f[0].src=h.source:e.src=h.image.src,h.caption?(g.text(h.caption).addClass("image-cap"),c(h.captionPosition)):g.text("").removeClass("image-cap"),m=h.pause?setTimeout(d,h.pause):setTimeout(d,i.delay),j++,j>=l&&(i.cb.call(this),j=0,i.loop||a.flipbooker.pause())}var e,f,g,h,i=a.extend(!0,{},a.flipbooker.defaults,c),j=0,k=a(i.container),l=b.length;k.css({height:i.height,width:i.width,position:"relative",overflow:"hidden"}),e=new Image,f=a(e).appendTo(k),g=a("<div>").appendTo(k);var m=setTimeout(d,i.delay);a(window).on("pause:flipbooker",function(){clearTimeout(m)}),a(window).on("play:flipbooker",function(){m=setTimeout(d,i.delay)})},a.flipbooker.pause=function(){a(window).trigger("pause:flipbooker")},a.flipbooker.play=function(){a(window).trigger("play:flipbooker")},a.flipbooker.defaults={container:"#flipbook",loop:!0,delay:100,height:"400px",width:"400px",cb:function(){}}}(jQuery);
